
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>How to debug installation failures &#8212; ALIGN 0.9 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Upcoming documentation" href="upcoming.html" />
    <link rel="prev" title="Viewer" href="viewer.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="upcoming.html" title="Upcoming documentation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="viewer.html" title="Viewer"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ALIGN 0.9 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="how-to-debug-installation-failures">
<h1>How to debug installation failures<a class="headerlink" href="#how-to-debug-installation-failures" title="Permalink to this headline">¶</a></h1>
<p>Despite using install.sh if something fails, we have collected a basic set of errors and how to resolve them.</p>
<div class="section" id="error-due-to-gcc-version">
<h2>Error due to gcc version<a class="headerlink" href="#error-due-to-gcc-version" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ERROR:
PlaceRouteHierFlow/pnr_compiler: /usr/lib64/libstdc++.so.6: version &#39;GLIBCXX_3.4.21&#39; not found
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>C++ version is old. Please update C++ version &gt; 4.2</p>
<p>**Inside UMN use “module load gcc/8.2.0”</p>
</div>
</div>
<div class="section" id="error-due-to-ld-library-path-prerequisite-missing">
<h2>Error due to LD_LIBRARY_PATH prerequisite missing<a class="headerlink" href="#error-due-to-ld-library-path-prerequisite-missing" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ERROR:
Unable to load lpsolve shared library (liblpsolve55.so).
It is probably not in the correct path.
LP test flag 2
TotNumberOfNest 14 TotNumberOfSTs 70
align.cmdline ERROR : Fatal Error. Cannot proceed
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It can be due to LD_LIBRARY_PATH not present or LD_LIBRARY_PATH path not correct</p>
</div>
<p>To install lpsolve:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://www.github.com/ALIGN-analoglayout/lpsolve.git
</pre></div>
</div>
<p>To set lpsolve environment path:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Ubuntu/bash: <span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="nv">$ALIGN_HOME</span>/lpsolve/lp_solve_5.5.2.5_dev_ux64/
RedHat/tcsh: Setenv LD_LIBRARY_PATH <span class="nv">$ALIGN_HOME</span>/lpsolve/lp_solve_5.5.2.5_dev_ux64/
</pre></div>
</div>
</div>
<div class="section" id="error-due-to-xvfb-library-used-to-generate-image-of-layout">
<h2>Error due to xvfb library used to generate image of layout<a class="headerlink" href="#error-due-to-xvfb-library-used-to-generate-image-of-layout" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ERROR :
Call to &#39;gds2png.sh /ALIGN-public/work/telescopic_ota/telescopic_ota_0.gds
/ALIGN-public/work/telescopic_ota/telescopic_ota_0.png
/ALIGN-public/align/config/image_png.rb&#39; failed:
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>xvfb package missing</p>
</div>
<p>To install xvfb:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install xvfb
</pre></div>
</div>
</div>
<div class="section" id="error-due-to-lpsolve-library-prerequisite-missing">
<h2>Error due to lpsolve library prerequisite missing<a class="headerlink" href="#error-due-to-lpsolve-library-prerequisite-missing" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ERROR:
./router/GcellGlobalRouter.h:47:10: fatal error: lp_lib.h: No such file or directory
#include &quot;lp_lib.h&quot;
      ^~~~~~~~~~
compilation terminated.
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It can be due to LD_LIBRARY_PATH not configured correctly</p>
</div>
<p>To install lpsolve:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://www.github.com/ALIGN-analoglayout/lpsolve.git
</pre></div>
</div>
<p>To set lpsolve environment path:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Ubuntu/bash: <span class="nb">export</span> <span class="nv">LP_DIR</span><span class="o">=</span><span class="nv">$ALIGN_HOME</span>/lpsolve
RedHat/tcsh: setenv LD_DIR <span class="nv">$ALIGN_HOME</span>/lpsolve
</pre></div>
</div>
</div>
<div class="section" id="error-due-to-googletest-prerequisite-missing">
<h2>Error due to googletest prerequisite missing<a class="headerlink" href="#error-due-to-googletest-prerequisite-missing" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ERROR:
unit_tests.cpp:2:10: fatal error: gtest/gtest.h: No such file or directory
 #include &lt;gtest/gtest.h&gt;
      ^~~~~~~~~~~~~~~
compilation terminated.
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It can be due to googletest not present or googletest path not correct</p>
</div>
<p>To install googletest:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="nv">$ALIGN_HOME</span>
git clone https://github.com/google/googletest
<span class="nb">cd</span> googletest/
cmake CMakeLists.txt
make
mkdir googletest/mybuild
cp -r lib googletest/mybuild/.
</pre></div>
</div>
<p>To set googletest path:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Ubuntu/bash: <span class="nb">export</span> <span class="nv">GTEST_DIR</span><span class="o">=</span><span class="nv">$ALIGN_HOME</span>/googletest/googletest/
RedHat/tcsh: setenv GTEST_DIR <span class="nv">$ALIGN_HOME</span>/googletest/googletest/
</pre></div>
</div>
</div>
<div class="section" id="error-due-to-json-prerequisite-missing">
<h2>Error due to JSON prerequisite missing<a class="headerlink" href="#error-due-to-json-prerequisite-missing" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ERROR:
PnRdatabase.h:23:10: fatal error: nlohmann/json.hpp: No such file or directory
 #include &lt;nlohmann/json.hpp&gt;
      ^~~~~~~~~~~~~~~~~~~
compilation terminated.
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It can be due to JSON not present or JSON path not correct</p>
</div>
<p>To install JSON:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="nv">$ALIGN_HOME</span>
git clone https://github.com/nlohmann/json.git
</pre></div>
</div>
<p>To set JSON path:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Ubuntu/bash: <span class="nb">export</span> <span class="nv">JSON</span><span class="o">=</span><span class="nv">$ALIGN_HOME</span>/json
RedHat/tcsh: setenv JSON <span class="nv">$ALIGN_HOME</span>/json
</pre></div>
</div>
</div>
<div class="section" id="error-due-to-python-virtual-environment-prerequisite-missing">
<h2>Error due to python virtual environment prerequisite missing<a class="headerlink" href="#error-due-to-python-virtual-environment-prerequisite-missing" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ERROR:
/bin/bash: /opt/venv/bin/activate: No such file or directory
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ALIGN is installed inside a python virtual environment. The default path of the virtual environment is assumed to be /opt/venv/bin/activate. You can edit the makefile to the path of your virtual environment or pass the virtual environment path as a parameter.</p>
</div>
<p>To install python virtual environment:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="nv">$ALIGN_HOME</span>
<span class="nb">export</span> <span class="nv">VENV</span><span class="o">=</span><span class="nv">$ALIGN_HOME</span>/general
python3.6 -m venv <span class="nv">$VENV</span>
<span class="nb">source</span> <span class="nv">$VENV</span>/bin/activate
pip install --upgrade pip
pip install -e .
deactivate
</pre></div>
</div>
<p>To set virtual environment path:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make  <span class="nv">VENV</span><span class="o">=</span><span class="nv">$VENV</span> <span class="nv">DESIGN</span><span class="o">=</span>telescopic_ota
</pre></div>
</div>
</div>
<div class="section" id="error-due-to-klayout-prerequisite-missing">
<h2>Error due to klayout prerequisite missing<a class="headerlink" href="#error-due-to-klayout-prerequisite-missing" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ERROR:
Call to klayout failed.
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Install klayout tool for visualization</p>
</div>
<p>To install klayout:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -o /klayout_0.25.4-1_amd64.deb https://www.klayout.org/downloads/Ubuntu-18/klayout_0.25.4-1_amd64.deb
apt-get install -yq /klayout_0.25.4-1_amd64.deb
</pre></div>
</div>
</div>
<div class="section" id="error-due-to-missing-align-installation">
<h2>Error due to missing align installation<a class="headerlink" href="#error-due-to-missing-align-installation" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ERROR:
python: can&#39;t open file
&#39;$ALIGN_HOME/general/bin/schematic2layout.py&#39;:
[Errno 2] No such file or directory
Makefile:36: recipe for target &#39;telescopic_ota/telescopic_ota_0.png&#39; failed
make: *** [telescopic_ota/telescopic_ota_0.png] Error 2
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This happens due to issues with pip version resulting in missing align package installation.</p>
</div>
<p>To update pip and install align:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="nv">$ALIGN_HOME</span>
<span class="nb">source</span> <span class="nv">$VENV</span>/bin/activate
pip Install --upgrade pip
pip Install -e .
deactivate
</pre></div>
</div>
</div>
<div class="section" id="error-due-to-g-package-not-updated">
<h2>Error due to g++ package not updated<a class="headerlink" href="#error-due-to-g-package-not-updated" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ERROR:
&lt;builtin&gt;: recipe for target &#39;capplacer.o&#39; failed
make[1]: *** [capplacer.o] Error 1
make[1]: Leaving directory &#39;$ALIGN_HOME/PlaceRouteHierFlow/cap_placer&#39;
Makefile:42: recipe for target &#39;subsystem&#39; failed
make: *** [subsystem] Error 2
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Check for errors during “sudo apt-get update”. It can be due to the older Ubuntu version and might need Ubuntu update.</p>
</div>
</div>
<div class="section" id="warnings-that-can-be-ignored">
<h2>Warnings that can be ignored:<a class="headerlink" href="#warnings-that-can-be-ignored" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>WriteJSON.cpp:144:1: warning: defined but not used [-Wunused-function]</p></li>
<li><p>GcellDetailRouter.cpp:2550:7: warning: unused variable ‘LLx’ [-Wunused-variable]</p></li>
<li><p>MNASimulation.cpp:: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]</p></li>
<li><p>GcellDetailRouter.cpp:2571:16: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ignore these warnings</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">How to debug installation failures</a><ul>
<li><a class="reference internal" href="#error-due-to-gcc-version">Error due to gcc version</a></li>
<li><a class="reference internal" href="#error-due-to-ld-library-path-prerequisite-missing">Error due to LD_LIBRARY_PATH prerequisite missing</a></li>
<li><a class="reference internal" href="#error-due-to-xvfb-library-used-to-generate-image-of-layout">Error due to xvfb library used to generate image of layout</a></li>
<li><a class="reference internal" href="#error-due-to-lpsolve-library-prerequisite-missing">Error due to lpsolve library prerequisite missing</a></li>
<li><a class="reference internal" href="#error-due-to-googletest-prerequisite-missing">Error due to googletest prerequisite missing</a></li>
<li><a class="reference internal" href="#error-due-to-json-prerequisite-missing">Error due to JSON prerequisite missing</a></li>
<li><a class="reference internal" href="#error-due-to-python-virtual-environment-prerequisite-missing">Error due to python virtual environment prerequisite missing</a></li>
<li><a class="reference internal" href="#error-due-to-klayout-prerequisite-missing">Error due to klayout prerequisite missing</a></li>
<li><a class="reference internal" href="#error-due-to-missing-align-installation">Error due to missing align installation</a></li>
<li><a class="reference internal" href="#error-due-to-g-package-not-updated">Error due to g++ package not updated</a></li>
<li><a class="reference internal" href="#warnings-that-can-be-ignored">Warnings that can be ignored:</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="viewer.html"
                        title="previous chapter">Viewer</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="upcoming.html"
                        title="next chapter">Upcoming documentation</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/debug.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="upcoming.html" title="Upcoming documentation"
             >next</a> |</li>
        <li class="right" >
          <a href="viewer.html" title="Viewer"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">ALIGN 0.9 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, ALIGN team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.3.1.
    </div>
  </body>
</html>